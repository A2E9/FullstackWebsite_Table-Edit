<p-confirmDialog
  [style]="{ width: '50vw' }"
  key="positionDialog"
  [position]="position"
  [baseZIndex]="10000"
  rejectButtonStyleClass="p-button-outlined"
></p-confirmDialog>

<p-toast></p-toast>
<main>
  <ng-container *ngIf="person">
    <p-card
      header="{{ person.anrede }} {{ person.name }} {{ person.vorname }}"
      subheader="User ID: {{ person.id }}"
      [style]="{ width: '450px' }"
      styleClass="p-card-shadow"
    >
      <ng-template pTemplate="header">
        <img alt="CardPic" height="300px" src="assets/kiwi.svg" />
      </ng-template>

      <p>Land: {{ person.nationalitaet }}</p>
      <p>Adresse: {{ person.strasse }} {{ person.plz }} {{ person.ort }}</p>
      <p>Geburtsdatum: {{ person.geburtsdatum }}</p>
      <p>Abteilung: {{ person.abteilung }}</p>
      <p>Familienstand: {{ person.familienstand }}</p>
      <p>Gehalt: {{ person.gehalt }}</p>
      <p>IBAN: {{ person.iban }}</p>
      <p>Steuerklasse: {{ person.steuerklasse }}</p>

      <ng-template pTemplate="footer">
        <div class="buttons flex justify-content-between">

          <p-button
            label="Edit"
            icon="pi  pi-pencil"
            (onClick)="editPerson()"
          ></p-button>
  
          <p-button
            label="Delete"
            icon="pi pi-spin pi-trash"
            styleClass="p-button-danger"
           
            (onClick)="deletePerson('top')"
          ></p-button>
  
          <p-button
            label="Zurück"
            icon="pi  pi-angle-double-right"
            styleClass="p-button-secondary"
            
            (onClick)="lastPage()"
          ></p-button>
        </div>

      </ng-template>

      <!-- <ng-template pTemplate="dialog">
        <p-dialog
          header="Edit Person"
          [(visible)]="display"
          [modal]="true"
          [style]="{ width: '50vw' }"
          [draggable]="false"
          [resizable]="false"
          [closable]="false"
          [transitionOptions]="'2ms'"
        >
           anrede,name, vorname, geschlecht, nationalitaet, strasse, plz, ort, geburtsdatum, abteilung, familienstand, gehalt, iban, steuerklasse 
          <form #form="ngForm" class="input grid">
            <div class="col-12 md:col-4">
              <label for="anrede" class="flex justify-content-center pb-3"
                >Anrede</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-user-edit"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.anrede"
                  name="anrede"
                  pInputText
                  placeholder="Anrede"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="30"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="vorname" class="flex justify-content-center pb-3"
                >Vorname</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-user-edit"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.vorname"
                  name="vorname"
                  pInputText
                  placeholder="Vorname"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="30"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="name" class="flex justify-content-center pb-3"
                >Nachname</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-user-edit"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.name"
                  name="name"
                  pInputText
                  placeholder="Nachname"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="30"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="steuerklasse" class="flex justify-content-center pb-3"
                >Steuerklasse</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.steuerklasse"
                  name="steuerklasse"
                  pInputText
                  placeholder="ID"
                  [pKeyFilter]="ccDigits"
                  [pValidateOnly]="true"
                  maxlength="1"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="iban" class="flex justify-content-center pb-3"
                >IBAN</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.iban"
                  name="iban"
                  pInputText
                  placeholder="IBAN"
                  [pKeyFilter]="ccIBAN"
                  [pValidateOnly]="true"
                  maxlength="34"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="gehalt" class="flex justify-content-center pb-3"
                >Gehalt</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.gehalt"
                  name="gehalt"
                  pInputText
                  placeholder="Gehalt"
                  [pKeyFilter]="ccDigits"
                  [pValidateOnly]="true"
                  maxlength="10"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label
                for="familienstand"
                class="flex justify-content-center pb-3"
                >Familienstand</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.familienstand"
                  name="familienstand"
                  pInputText
                  placeholder="Familienstand"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="15"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="abteilung" class="flex justify-content-center pb-3"
                >Abteilung</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.abteilung"
                  name="abteilung"
                  pInputText
                  placeholder="Abteilung"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="30"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="geburtsdatum" class="flex justify-content-center pb-3"
                >Geburtsdatum</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <p-calendar [(ngModel)]="person.geburtsdatum" name="geburtsdatum" dateFormat="dd.mm.yy" [showIcon]="true" [style]="{ width: '140px' }" placeholder="Geburtsdatum"></p-calendar>
                <!-- <input
                  type="text"
                  [(ngModel)]="person.geburtsdatum"
                  
                  pInputText
                  
                  [pKeyFilter]="ccDate"
                  [pValidateOnly]="true"
                  maxlength="10"
                /> 
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="geschlecht" class="flex justify-content-center pb-3"
                >Geschlecht</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.geschlecht"
                  name="geschlecht"
                  pInputText
                  placeholder="Geschlecht"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="10"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label
                for="nationalitaet"
                class="flex justify-content-center pb-3"
                >Nationalität</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.nationalitaet"
                  name="nationalitaet"
                  pInputText
                  placeholder="Nationalität"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="30"
                />
              </div>
            </div>

            <div class="col-12 md:col-4">
              <label for="strasse" class="flex justify-content-center pb-3"
                >Straße</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.strasse"
                  name="strasse"
                  pInputText
                  placeholder="Straße"
                  [pKeyFilter]="ccName"
                  [pValidateOnly]="true"
                  maxlength="30"
                />
              </div>
              <p-message
                class="inline flex justify-content-center pt-3"
                severity="error"
                text="Not valid!"
                *ngIf="(form.dirty && !form.valid) || person.name.length == 0"
              ></p-message>
            </div>

            <div class="col-12 md:col-4">
              <label for="plz" class="flex justify-content-center pb-3"
                >PLZ</label
              >
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">
                  <i class="pi pi-dollar"></i
                ></span>
                <input
                  type="text"
                  [(ngModel)]="person.plz"
                  name="plz"
                  pInputText
                  placeholder="PLZ"
                  [pKeyFilter]="ccDigits"
                  [pValidateOnly]="true"
                  maxlength="5"
                />
              </div>
            </div>
          </form>

          <div class="action pb-0">
            <div
              class="buttons col pt-4 flex justify-content-end"
              style="align-content: end"
            >
              <p-button
                label="Confirm"
                [disabled]="!form.valid"
                (click)="confirmPosition('top')"
                icon="pi  pi-check"
                styleClass="p-button-success mr-2"
              ></p-button>
              <p-button
                label="Cancel"
                (click)="cancelPosition('bottom')"
                icon="pi  pi-times"
                styleClass="p-button-danger mr-2"
              ></p-button>
            </div>
          </div>
        </p-dialog>
      </ng-template> -->
    </p-card>

    <p-dialog [(visible)]="personDia" [style]="{width: '550px'}" header="Person Details" [modal]="true" styleClass="p-fluid">
      <ng-template pTemplate="content">
        
        <div class="field flex justify-content-between">
          <div class="flex flex-column">
            <label for="inventoryStatus">Anrede</label>
            <p-dropdown [(ngModel)]="person.anrede" inputId="anrede" [options]="anreden" placeholder="Select">
            </p-dropdown>
          </div>

          <div class="flex flex-column">
            <label for="vorname">Vorname</label>
            <input type="text" pInputText id="vorname" [(ngModel)]="person.vorname" required autofocus />
            <small class="p-error" *ngIf="submitted && !person.vorname">Vorname is required.</small>
          </div>

          <div class="flex flex-column"> 
            <label for="name">Nachname</label>
            <input type="text" pInputText id="name" [(ngModel)]="person.name" required autofocus />
            <small class="p-error" *ngIf="submitted && !person.name">Nachname is required.</small>
          </div>
        </div>

        <div class="field flex justify-content-between">
          <div class="flex flex-column ">
            <label for="geburtsdatum">Geburtsdatum</label>
            <p-calendar [(ngModel)]="person.geburtsdatum" dateFormat="dd.mm.yy" [showIcon]="true" [style]="{ width: '140px' }"></p-calendar>
            <small class="p-error" *ngIf="submitted && !person.geburtsdatum">Geburtsdatum is required.</small>
          </div>
          <div class="flex flex-column">
            <label for="geschlecht" class="text-center">Geschlecht</label>
            <p-dropdown [(ngModel)]="person.geschlecht" inputId="inventoryStatus" [options]="geschlechten" placeholder="Select" style="width: 150px" >
            </p-dropdown>
            <small class="p-error" *ngIf="submitted && !person.geschlecht">Geschlecht is required.</small>
          </div>

          <div class="flex flex-column ">
            <label for="nationalitaet">Nationalität</label>
            <input type="text" pInputText id="nationalitaet"  [(ngModel)]="person.nationalitaet" />
      
          </div>
        </div>
        
        <div class="field">
          <label class="mb-3">Familienstand</label>
          <div class=" flex justify-content-between">
              
              <div class="field-radiobutton col-4">
                  <p-radioButton id="familienstand2" name="familienstand" value="verheiratet" [(ngModel)]="person.familienstand"></p-radioButton>
                  <label for="category2">Verheiratet</label>
              </div>
              <div class="field-radiobutton col-4">
                  <p-radioButton id="familienstand3" name="familienstand" value="geschieden" [(ngModel)]="person.familienstand"></p-radioButton>
                  <label for="category3">Geschieden</label>
              </div>
              <div class="field-radiobutton col-4">
                <p-radioButton id="familienstand1" name="familienstand" value="ledig" [(ngModel)]="person.familienstand"></p-radioButton>
                <label for="category1">Ledig</label>
            </div>
        
          </div>
          <small class="p-error" *ngIf="submitted && !person.familienstand">Familienstand is required.</small>
        </div>
  
        <div class="field flex justify-content-between">

          <div class="flex flex-column">
            <label for="strasse">Strasse</label>
            <input type="text" pInputText id="strasse" [(ngModel)]="person.strasse" required autofocus />
            <small class="p-error" *ngIf="submitted && !person.strasse">Strasse is required.</small>
          </div>
  
          <div class="flex flex-column">
            <label for="plz">PLZ</label>
            <p-inputMask   id="plz" [(ngModel)]="person.plz"  autofocus style="width: 150px" [unmask]="true" placeholder="99999" mask="99999"> </p-inputMask>
            <small class="p-error" *ngIf="submitted && !person.plz">PLZ is required.</small>
          </div>

          <div class="flex flex-column"> 
            <label for="ort">Ort</label>
            <input type="text" pInputText id="ort" [(ngModel)]="person.ort" required autofocus />
            <small class="p-error" *ngIf="submitted && !person.ort">Ort is required.</small>
          </div>

        </div>
  
        <div class="field flex justify-content-between">

          <div class="flex flex-column"> 
            <label for="abteilung" class="text-center">Abteilung</label>
            <input type="text" pInputText id="abteilung" [(ngModel)]="person.abteilung" style="width:100%" />
          </div>

          <div class="flex flex-column">
            <label for="steuerklasse" class="text-center">Steuerklasse</label>
            <p-dropdown [(ngModel)]="person.steuerklasse" inputId="inventoryStatus" [options]="steuerklassen" placeholder="Select" style="width: 250px" >
            </p-dropdown>
            <small class="p-error" *ngIf="submitted && !person.steuerklasse">Steuerklasse is required.</small>
          </div>

        </div>
  
        <div class="formgrid grid">
          <div class="field col flex flex-column">
              <label for="gehalt" class="text-center">Gehalt</label>
              <p-inputNumber id="gehalt" [(ngModel)]="person.gehalt" mode="currency" currency="EUR" locale="en-US" ></p-inputNumber>
              <small class="p-error" *ngIf="submitted && !person.gehalt">Gehalt is required.</small>
          </div>
        </div>   
  
        <div class="field ">
          <div class="flex flex-column">
            <label for="iban" class="text-center">IBAN</label>
            <!-- <input type="text" pInputText id="iban" [(ngModel)]="person.iban" required autofocus style="width: 100%" maxlength="34" /> -->
            <p-inputMask  pInputText id="iban" [(ngModel)]="person.iban"  autofocus style="width: 100%" [unmask]="true" placeholder="AA-99999999999999999999999999999999" mask="a*-99999999999999999999999999999999"> </p-inputMask>
            <small class="p-error bbb" *ngIf="submitted && !person.iban">IBAN is required.</small>
          </div>
        </div>

    </ng-template>
  
      <ng-template pTemplate="footer">
          <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="cancel('bottom')"></button>
          <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="confirm('top')"></button>
      </ng-template>
  </p-dialog>
  </ng-container>
</main>
